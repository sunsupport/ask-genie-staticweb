"use strict";(self["webpackChunkweweb_front"]=self["webpackChunkweweb_front"]||[]).push([[602],{1803:(e,t,n)=>{n.d(t,{A:()=>a});var i=n(641),o=n(33);function l(e,t,n,l,s,d){const r=(0,i.g2)("wwElement",!0),c=(0,i.g2)("wwText");return(0,i.uX)(),(0,i.Wv)((0,i.$y)(d.tag),(0,i.v6)({class:["ww-button",{button:d.tag,"-link":l.hasLink&&!d.isEditing}],type:d.buttonType,style:d.buttonStyle,"data-ww-flag":"btn-"+n.content.buttonType,disabled:n.content.disabled},l.properties,{onFocus:t[0]||(t[0]=e=>s.isReallyFocused=!0),onBlur:t[1]||(t[1]=e=>d.onBlur(e))}),{default:(0,i.k6)((()=>[n.content.hasLeftIcon&&n.content.leftIcon?((0,i.uX)(),(0,i.Wv)(r,(0,o._B)((0,i.v6)({key:0},n.content.leftIcon)),null,16)):(0,i.Q3)("",!0),(0,i.bF)(c,{tag:"span",text:d.text},null,8,["text"]),n.content.hasRightIcon&&n.content.rightIcon?((0,i.uX)(),(0,i.Wv)(r,(0,o._B)((0,i.v6)({key:1},n.content.rightIcon)),null,16)):(0,i.Q3)("",!0)])),_:1},16,["class","type","style","data-ww-flag","disabled"])}const s={center:"center",right:"flex-end",left:"flex-start",justify:"center"},d={props:{content:{type:Object,required:!0},wwFrontState:{type:Object,required:!0},wwElementState:{type:Object,required:!0}},emits:["update:content","update:content:effect","change-menu-visibility","change-borders-style","add-state","remove-state","trigger-event"],setup(e){const{hasLink:t,tag:n,properties:o}=wwLib.wwElement.useLink({isDisabled:(0,i.EW)((()=>e.content.disabled))});return{hasLink:t,linkTag:n,properties:o}},data(){return{isReallyFocused:!1}},computed:{buttonStyle(){return{justifyContent:s[this.content["_ww-text_textAlign"]]||"center"}},isEditing(){return!1},tag(){return this.isEditing?"div":this.hasLink?this.linkTag:"submit"===this.content.buttonType||"reset"===this.content.buttonType||"button"===this.content.buttonType?"button":"div"},buttonType(){return this.isEditing||this.hasLink?"":"submit"===this.content.buttonType||"reset"===this.content.buttonType||"button"===this.content.buttonType?this.content.buttonType:""},text(){return this.wwElementState.props.text},isFocused(){return this.isReallyFocused}},watch:{"content.disabled":{immediate:!0,handler(e){e?this.$emit("add-state","disabled"):this.$emit("remove-state","disabled")}},isReallyFocused(e,t){e&&!t?this.$emit("trigger-event",{name:"focus"}):!e&&t&&this.$emit("trigger-event",{name:"blur"})},isFocused:{immediate:!0,handler(e){e?this.$emit("add-state","focus"):this.$emit("remove-state","focus")}}},methods:{onBlur(){this.isReallyFocused=!1}}};var r=n(6262);const c=(0,r.A)(d,[["render",l],["__scopeId","data-v-1cc6eeab"]]),a=c},5503:(e,t,n)=>{n.d(t,{A:()=>x});var i=n(641),o=n(33);const l={key:0},s={key:0},d={class:"columnHeader"},r={key:0},c={class:"columnHeader"};function a(e,t,n,a,u,h){const m=(0,i.g2)("wwElement",!0),p=(0,i.g2)("DataGridRow"),w=(0,i.g2)("wwLayout");return(0,i.uX)(),(0,i.CE)("table",{class:(0,o.C4)(["ww-data-grid",{sticky:n.content.hasStickyHeader}]),style:(0,o.Tr)(h.cssVars),cellpadding:"0",cellspacing:"0"},[(0,i.Lk)("colgroup",null,[n.content.selectable?((0,i.uX)(),(0,i.CE)("col",{key:0,style:(0,o.Tr)({width:n.content.selectColumnWidth||"auto"})},null,4)):(0,i.Q3)("",!0),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(n.content.columns,((e,t)=>((0,i.uX)(),(0,i.CE)(i.FK,{key:t},[e.display?((0,i.uX)(),(0,i.CE)("col",{key:0,style:(0,o.Tr)({width:e.width||"auto"})},null,4)):(0,i.Q3)("",!0)],64)))),128)),n.content.inlineEditing?((0,i.uX)(),(0,i.CE)("col",{key:1,style:(0,o.Tr)({width:n.content.actionColumnWidth||"auto"})},null,4)):(0,i.Q3)("",!0)]),n.content.displayHeader?((0,i.uX)(),(0,i.CE)("thead",l,[n.content.selectable?((0,i.uX)(),(0,i.CE)("th",s,[(0,i.Lk)("div",d,[(0,i.bF)(m,(0,o._B)((0,i.Ng)(n.content.headerTextSelectable)),null,16),(0,i.bF)(m,(0,i.v6)(n.content.selectCheckbox,{states:h.isAllSelected?["checked"]:[],onClick:h.toggleAllSelection}),null,16,["states","onClick"])])])):(0,i.Q3)("",!0),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(n.content.columns,((e,t)=>((0,i.uX)(),(0,i.CE)(i.FK,{key:t},[e.display?((0,i.uX)(),(0,i.CE)("th",r,[(0,i.Lk)("div",c,[n.content.headerTextElements[e.id]?((0,i.uX)(),(0,i.Wv)(m,{key:0,uid:n.content.headerTextElements[e.id].uid},null,8,["uid"])):(0,i.Q3)("",!0),n.content.sortIcon&&e.sortable?((0,i.uX)(),(0,i.Wv)(m,{key:1,uid:n.content.sortIcon.uid,class:(0,o.C4)({"-reversed":"DESC"===a.columnsSort.order&&a.columnsSort.name===(e.name||t)}),states:a.columnsSort.name===(e.name||t)?["active"]:"",onClick:n=>h.toggleSort(e,t)},null,8,["uid","class","states","onClick"])):(0,i.Q3)("",!0)])])):(0,i.Q3)("",!0)],64)))),128)),n.content.inlineEditing?((0,i.uX)(),(0,i.CE)("th",{key:1,style:(0,o.Tr)({width:n.content.actionColumnWidth||"auto"})},[(0,i.bF)(m,(0,o._B)((0,i.Ng)(n.content.headerTextActions)),null,16)],4)):(0,i.Q3)("",!0)])):(0,i.Q3)("",!0),(0,i.bF)(w,{path:"data",tag:"tbody",class:"body","disable-edit":""},{default:(0,i.k6)((({index:o,data:l})=>[((0,i.uX)(),(0,i.Wv)(p,{id:h.getRowId(l),key:h.getRowId(l,o),class:"grid-row",item:l,columns:n.content.columns,"columns-element":n.content.columnsElement,"editable-custom-columns-element":n.content.editableCustomColumnsElement,"is-edit-available":n.content.inlineEditing,"is-editing":h.isEditing,edit:h.forcedInlineEditing&&0===o||n.content.inlineEditing&&void 0!==u.editingId&&h.getRowId(l)===u.editingId,"edit-container":n.content.editContainer,"editing-container":n.content.editingContainer,"select-checkbox":n.content.selectCheckbox,selectable:n.content.selectable,"is-selected":h.getIsSelected(h.getRowId(l)),"onUpdate:edit":e=>h.setEdit(e,h.getRowId(l)),"onUpdate:row":t[0]||(t[0]=t=>e.$emit("trigger-event",{name:"update:row",event:t})),"onDelete:row":t[1]||(t[1]=t=>e.$emit("trigger-event",{name:"delete:row",event:t})),"onUpdate:isSelected":e=>h.updateRowSelection(e,l,h.getRowId(l))},null,8,["id","item","columns","columns-element","editable-custom-columns-element","is-edit-available","is-editing","edit","edit-container","editing-container","select-checkbox","selectable","is-selected","onUpdate:edit","onUpdate:isSelected"]))])),_:1})],6)}var u=n(3751);const h={key:0},m=["id"],p={key:1,class:"message ww-typo-sub-text flex items-center"};function w(e,t,n,l,s,d){const r=(0,i.g2)("wwElement"),c=(0,i.g2)("DataGridCell"),a=(0,i.g2)("DataGridActionCell");return(0,i.uX)(),(0,i.CE)("tr",{class:(0,o.C4)({bgSelected:n.isSelected})},[n.selectable?((0,i.uX)(),(0,i.CE)("td",h,[(0,i.bF)(r,(0,i.v6)(n.selectCheckbox,{states:n.isSelected?["checked"]:[],onClick:t[0]||(t[0]=t=>e.$emit("update:is-selected",!n.isSelected))}),null,16,["states"])])):(0,i.Q3)("",!0),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(n.columns,((e,o)=>((0,i.uX)(),(0,i.CE)(i.FK,{key:e.id},[e.display?((0,i.uX)(),(0,i.Wv)(c,{key:0,ref_for:!0,ref:t=>d.registerCellRef(e.id,t),column:e,item:n.item,edit:e.editable&&n.edit,"columns-element":n.columnsElement,"editable-custom-columns-element":n.editableCustomColumnsElement,"row-unique-id":s.uniqueId},{default:(0,i.k6)((()=>[n.edit&&0===o?((0,i.uX)(),(0,i.CE)("form",{key:0,id:s.uniqueId,ref_for:!0,ref:"form",hidden:"",onSubmit:t[1]||(t[1]=(0,u.D$)(((...e)=>d.onSubmit&&d.onSubmit(...e)),["prevent"]))},null,40,m)):(0,i.Q3)("",!0)])),_:2},1032,["column","item","edit","columns-element","editable-custom-columns-element","row-unique-id"])):(0,i.Q3)("",!0)],64)))),128)),n.columns&&n.columns.length?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("span",p," Please define a column ")),n.isEditAvailable?((0,i.uX)(),(0,i.Wv)(a,{key:2,id:n.id,"is-editing":n.isEditing,"edit-container":n.editContainer,"editing-container":n.editingContainer,edit:n.edit,"onUpdate:edit":t[2]||(t[2]=t=>e.$emit("update:edit",t)),onValidate:d.onValidate,onDelete:d.onDelete,onCancel:d.onCancel},null,8,["id","is-editing","edit-container","editing-container","edit","onValidate","onDelete","onCancel"])):(0,i.Q3)("",!0)],2)}const g={class:"ww-data-grid-action-cell"};function b(e,t,n,o,l,s){const d=(0,i.g2)("wwElement");return(0,i.uX)(),(0,i.CE)("td",null,[(0,i.Lk)("div",g,[((0,i.uX)(),(0,i.CE)(i.FK,{key:1},[(0,i.bF)(d,(0,i.v6)({class:{"hide-container":n.edit}},n.editContainer,{"ww-props":{isFixed:!0},onElementEvent:s.onEditContainerEvent,"onUpdate:isSelected":s.onIsEditContainerSelected,"onUpdate:childSelected":s.onIsEditContainerSelected}),null,16,["class","onElementEvent","onUpdate:isSelected","onUpdate:childSelected"]),(0,i.bF)(d,(0,i.v6)({class:{"hide-container":!n.edit}},n.editingContainer,{"ww-props":{isFixed:!0},onElementEvent:s.onEditingContainerEvent,"onUpdate:isSelected":s.onIsEditingContainerSelected,"onUpdate:childSelected":s.onIsEditingContainerSelected}),null,16,["class","onElementEvent","onUpdate:isSelected","onUpdate:childSelected"])],64))])])}const y={props:{id:{type:void 0,required:!0},editContainer:{type:Object,required:!0},editingContainer:{type:Object,required:!0},edit:{type:Boolean,default:!1},isEditing:{type:Boolean,default:!1}},emits:["update:edit","validate","delete","cancel"],methods:{onEditContainerEvent(e){"click"===e.type&&(0===e.index?this.$emit("update:edit",!this.edit):this.$emit("delete"))},onEditingContainerEvent(e){"click"===e.type&&(0===e.index?this.$emit("validate"):this.$emit("cancel"))},onIsEditContainerSelected(e){e&&this.edit&&this.$emit("update:edit",!1)},onIsEditingContainerSelected(e){e&&!this.edit&&this.$emit("update:edit",!0)}}};var C=n(6262);const v=(0,C.A)(y,[["render",b]]),E=v,S={class:"ww-data-grid-cell"};function f(e,t,n,o,l,s){const d=(0,i.g2)("wwElement");return(0,i.uX)(),(0,i.CE)("td",S,[(0,i.RG)(e.$slots,"default"),s.element&&s.element.uid?((0,i.uX)(),(0,i.Wv)(d,{key:0,"ww-props":{[s.isMultiSelect?"currentSelection":"value"]:o.internalValue,readonly:!n.edit,attributes:n.edit?{form:n.rowUniqueId}:{}},uid:s.element.uid,onElementEvent:s.onElementEvent},null,8,["ww-props","uid","onElementEvent"])):(0,i.Q3)("",!0)])}var k=n(953);const B={expose:["internalValue","column","resetValue"],props:{column:{type:Object,required:!0},item:{type:Object,required:!0},columnsElement:{type:Object,required:!0},editableCustomColumnsElement:{type:Object,required:!0},edit:{type:Boolean,default:!1},rowUniqueId:{required:!0,type:String}},setup(e){const t=(0,i.EW)((()=>{if(e.column)return _.get(e.item,e.column.path)})),n=(0,k.KR)(t.value),o=(0,k.KR)(t.value);return(0,i.wB)(t,(e=>{n.value=e})),(0,i.wB)((0,k.lW)(e,"edit"),((e,n)=>{!n&&e&&(o.value=t.value)})),{setValue(e){n.value=e},internalValue:n,value:t,previousValue:o}},computed:{type(){return this.column?"custom"===this.column.type&&this.column.editable&&this.edit?this.column.editableType:this.column.type:null},element(){return this.column?"custom"===this.column.type&&this.column.editable&&this.edit&&this.editableCustomColumnsElement[this.column.id]?this.editableCustomColumnsElement[this.column.id]:this.columnsElement[this.column.id]:null},isMultiSelect(){return"multiselect"===this.type}},methods:{onElementEvent(e){"update:value"!==e.type&&"update:currentSelection"!==e.type||this.setValue(e.value)},resetValue(){this.internalValue=this.previousValue}}},I=(0,C.A)(B,[["render",f]]),R=I,A={components:{DataGridActionCell:E,DataGridCell:R},props:{id:{type:void 0,required:!0},item:{type:Object,required:!0},columns:{type:Array,required:!0},columnsElement:{type:Object,required:!0},editableCustomColumnsElement:{type:Object,required:!0},isEditAvailable:{type:Boolean,default:!1},editContainer:{type:Object,required:!0},editingContainer:{type:Object,required:!0},selectCheckbox:{type:Object,required:!0},edit:{type:Boolean,default:!1},selectable:{type:Boolean,default:!1},isSelected:{type:Boolean,default:!1},isEditing:{type:Boolean,default:!1}},emits:["update:edit","update:row","delete:row","update:is-selected"],data(){return{cellRefs:{},uniqueId:`form-row-${wwLib.wwUtils.getUid()}`}},methods:{onSubmit(){const e=_.cloneDeep(this.item);Object.values(this.cellRefs).forEach((t=>{t.column&&"custom"!==t.column.type&&_.set(e,t.column&&t.column.path,_.cloneDeep(t.internalValue))})),this.$emit("update:row",{value:e,id:this.id,cancel:()=>{Object.values(this.cellRefs).forEach((e=>{e.resetValue()}))}}),this.$emit("update:edit",!1)},onValidate(){const e=Array.isArray(this.$refs.form)?this.$refs.form[0]:this.$refs.form;if(e){const t=e.checkValidity();t?this.onSubmit():e.reportValidity()}else this.onSubmit()},onDelete(){this.$emit("delete:row",{id:this.id,value:this.item})},onCancel(){Object.values(this.cellRefs).forEach((e=>{e.resetValue()})),this.$emit("update:edit",!1)},registerCellRef(e,t){t&&(this.cellRefs[e]=t)}}},V=(0,C.A)(A,[["render",w]]),T=V,X={components:{DataGridRow:T},props:{content:{type:Object,required:!0},uid:{type:String,required:!0},wwFrontState:{type:Object,required:!0}},emits:["update:content","update:content:effect","trigger-event"],setup(e){const{value:t,setValue:n}=wwLib.wwVariable.useComponentVariable({uid:e.uid,name:"selectedRows",defaultValue:[],type:"Array",readonly:!0,resettable:!0}),{value:i,setValue:o}=wwLib.wwVariable.useComponentVariable({uid:e.uid,name:"sort",defaultValue:{name:null,order:"ASC"},type:"Object"});return{selectedRows:t,setSelectedRows:n,columnsSort:i,setColumnsSort:o}},data(){return{editingId:void 0}},computed:{isEditing(){return!1},cssVars(){return{"--headerBgColor":this.content.headerBackgroundColor,"--rowBgColor":this.content.rowBackgroundColor,"--rowBgColorAlt":this.content.alternateBackground?this.content.rowBackgroundColorAlt:this.content.rowBackgroundColor,...this.content.rowBackgroundColorHover?{"--rowBgColorHover":this.content.rowBackgroundColorHover}:{},...this.content.rowBackgroundColorSelected?{"--rowBgColorSelected":this.content.rowBackgroundColorSelected}:{},"--verticalAlignement":this.content.verticalAlignement,"--theadBordersVertical":this.content.isTheadBorderSplit?this.content.theadBordersVertical:this.content.theadBorders,"--theadBordersHorizontal":this.content.isTheadBorderSplit?this.content.theadBordersHorizontal:this.content.theadBorders,"--thBordersVertical":this.content.isThBorderSplit?this.content.thBordersVertical:this.content.thBorders,"--thBordersHorizontal":this.content.isThBorderSplit?this.content.thBordersHorizontal:this.content.thBorders,"--trBordersVertical":this.content.isTrBorderSplit?this.content.trBordersVertical:this.content.trBorders,"--trBordersHorizontal":this.content.isTrBorderSplit?this.content.trBordersHorizontal:this.content.trBorders,"--tdBordersVertical":this.content.isTdBorderSplit?this.content.tdBordersVertical:this.content.tdBorders,"--tdBordersHorizontal":this.content.isTdBorderSplit?this.content.tdBordersHorizontal:this.content.tdBorders}},forcedInlineEditing(){return!1},isAllSelected(){const e=wwLib.wwCollection.getCollectionData(this.content.data);return!!Array.isArray(e)&&e.every(((e,t)=>this.selectedRows.some((({id:n})=>n===this.getRowId(e,t)))))}},watch:{},methods:{getRowId(e,t){return _.get(e,this.content.dataIdPath,t)},setEdit(e,t){this.editingId=e?t:void 0},getIsSelected(e){return!!e&&(!!Array.isArray(this.selectedRows)&&this.selectedRows.some((t=>t&&t.id===e)))},updateRowSelection(e,t){const n=this.getRowId(t);if(!n)return;const i=this.getIsSelected(n);e&&!i?this.setSelectedRows([...this.selectedRows,{id:n,value:t}]):!e&&i&&this.setSelectedRows([...this.selectedRows].filter((e=>e&&e.id!==n)))},async toggleSort(e,t){if(!e.sortable)return;const n=e.name||t,i=n===this.columnsSort.name&&"ASC"===this.columnsSort.order?"DESC":"ASC";await this.setColumnsSort({name:n,key:e.path,order:i}),this.$emit("trigger-event",{name:"sort",event:{order:i,name:n}})},toggleAllSelection(){const e=wwLib.wwCollection.getCollectionData(this.content.data);Array.isArray(e)?this.isAllSelected?this.setSelectedRows([]):this.setSelectedRows(e.map((e=>({value:e,id:this.getRowId(e)})))):this.setSelectedRows([])}}},q=(0,C.A)(X,[["render",a],["__scopeId","data-v-b04bdcbc"]]),x=q},7990:(e,t,n)=>{n.d(t,{A:()=>c});var i=n(641),o=n(33);function l(e,t,n,l,s,d){return(0,i.uX)(),(0,i.CE)("div",{class:"ww-checkbox",style:(0,o.Tr)(d.style)},[(0,i.Lk)("div",{class:(0,o.C4)([n.content.icon]),"aria-hidden":"true"},null,2)],4)}const s={props:{content:{type:Object,required:!0}},computed:{style(){return{color:this.content.color,fontSize:`${this.content.fontSize}px`}}}};var d=n(6262);const r=(0,d.A)(s,[["render",l],["__scopeId","data-v-19a75149"]]),c=r}}]);